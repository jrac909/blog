(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{442:function(t,a,s){"use strict";s.r(a);var n=s(62),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),s("h3",{attrs:{id:"基础示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础示例"}},[t._v("#")]),t._v(" 基础示例")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/babel"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Life")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("opacity")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("death")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ReactDOM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unmountComponentAtNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" opacity "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            opacity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" opacity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" opacity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("opacity")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" opacity "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillUnmount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h2 style"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("opacity")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("opacity "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("这是一个变化中的标题"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("death "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("销毁组件"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nReactDOM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Life "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("h3",{attrs:{id:"reactdom-unmountcomponentatnode-dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reactdom-unmountcomponentatnode-dom"}},[t._v("#")]),t._v(" ReactDOM.unmountComponentAtNode(dom)")]),t._v(" "),s("p",[t._v("销毁参数节点。")]),t._v(" "),s("h3",{attrs:{id:"componentwillmount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentwillmount"}},[t._v("#")]),t._v(" componentWillMount")]),t._v(" "),s("p",[t._v("组件将要挂载")]),t._v(" "),s("h3",{attrs:{id:"componentdidmount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentdidmount"}},[t._v("#")]),t._v(" componentDidMount")]),t._v(" "),s("p",[t._v("组件挂载完毕就被调用。")]),t._v(" "),s("h3",{attrs:{id:"componentwillunmount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentwillunmount"}},[t._v("#")]),t._v(" componentWillUnmount")]),t._v(" "),s("p",[t._v("组件临销毁前的状态，这个方法执行后就执行销毁了。")]),t._v(" "),s("h3",{attrs:{id:"render"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#render"}},[t._v("#")]),t._v(" render")]),t._v(" "),s("p",[t._v("也属于生命钩子函数的一个。")]),t._v(" "),s("h3",{attrs:{id:"componentdidupdate-preprops-prestate-getsnapshotbeforeupdate传的参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#componentdidupdate-preprops-prestate-getsnapshotbeforeupdate传的参数"}},[t._v("#")]),t._v(" componentDidUpdate(preProps, preState, getSnapshotBeforeUpdate传的参数)")]),t._v(" "),s("h3",{attrs:{id:"生命周期流程图-旧版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期流程图-旧版本"}},[t._v("#")]),t._v(" 生命周期流程图（旧版本）")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("挂载时")]),t._v(" "),s("ul",[s("li",[t._v("调用构造器方法")]),t._v(" "),s("li",[t._v("调用 componentWillMount")]),t._v(" "),s("li",[t._v("调用 render")]),t._v(" "),s("li",[t._v("调用 componentDidMount")])])]),t._v(" "),s("li",[s("p",[t._v("卸载组件")]),t._v(" "),s("ul",[s("li",[t._v("componentWillUnmount")])])]),t._v(" "),s("li",[s("p",[t._v("更新状态 1 （setState）")]),t._v(" "),s("ul",[s("li",[t._v("调用 shouldComponentUpdate：组件是否应该被更新，如果这个钩子返回 false，这次更新操作到这里就结束了。如果不写这个钩子函数，默认返回 true，但是只要写了，就一定要写返回值！true，继续执行后面的钩子函数。")]),t._v(" "),s("li",[t._v("调用 componentWillUpdate")]),t._v(" "),s("li",[t._v("调用 render")]),t._v(" "),s("li",[t._v("调用 componentDidUpdate")])])]),t._v(" "),s("li",[s("p",[t._v("更新状态 2 （forceUpdate:不经过阀门判断，直接进入更新流程，即使没有对状态做修改）")]),t._v(" "),s("ul",[s("li",[t._v("调用 componentWillUpdate")]),t._v(" "),s("li",[t._v("调用 render")]),t._v(" "),s("li",[t._v("调用 componentDidUpdate")])])]),t._v(" "),s("li",[s("p",[t._v("更新状态 3 （父组件 render：父组件执行了 render）")]),t._v(" "),s("ul",[s("li",[t._v("componentWillReceiveProps(props)：这里有个坑，"),s("code",[t._v("第一次传的 props 不会调用这个钩子，其实就像 will receive new props")]),t._v("，这个钩子函数还有一个参数, props 是新的 props")]),t._v(" "),s("li",[t._v("调用 shouldComponentUpdate：组件是否应该被更新，如果这个钩子返回 false，这次更新操作到这里就结束了。如果不写这个钩子函数，默认返回 true，但是只要写了，就一定要写返回值！true，继续执行后面的钩子函数。")]),t._v(" "),s("li",[t._v("调用 componentWillUpdate")]),t._v(" "),s("li",[t._v("调用 render")]),t._v(" "),s("li",[t._v("调用 componentDidUpdate")])])])]),t._v(" "),s("h3",{attrs:{id:"生命周期流程图-新版本-干掉了原来的三个-新提出来了两个"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期流程图-新版本-干掉了原来的三个-新提出来了两个"}},[t._v("#")]),t._v(" 生命周期流程图（新版本：干掉了原来的三个，新提出来了两个）")]),t._v(" "),s("h4",{attrs:{id:"去掉了哪些钩子函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#去掉了哪些钩子函数"}},[t._v("#")]),t._v(" 去掉了哪些钩子函数")]),t._v(" "),s("ol",[s("li",[t._v("去掉的三个钩子函数分别是：componentWillMount、componentWillUpdate、componentWillReceiveProps")]),t._v(" "),s("li",[t._v("在新版本 17.x 中，使用上面的三个方法并不会报错，但是会有警告，可以通过加 UNSAFE_ 前缀来调用上面的三个方法消除警告")])]),t._v(" "),s("h4",{attrs:{id:"为什么会去掉这些钩子函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么会去掉这些钩子函数"}},[t._v("#")]),t._v(" 为什么会去掉这些钩子函数？")]),t._v(" "),s("p",[t._v("首先明确，让这些钩子函数过期，并不是因为钩子函数本身有安全性问题。而是因为，这些钩子函数总是被开发者误解和滥用，由于这些误解和滥用，可能会导致一些问题，并且 React 正在设计一个异步渲染，在异步渲染中，它们潜在的误用问题可能更大。")]),t._v(" "),s("h4",{attrs:{id:"执行流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行流程"}},[t._v("#")]),t._v(" 执行流程")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("挂载时")]),t._v(" "),s("ul",[s("li",[t._v("调用构造器方法")]),t._v(" "),s("li",[t._v("调用 getDerivedStateFromProps")]),t._v(" "),s("li",[t._v("调用 render")]),t._v(" "),s("li",[t._v("调用 componentDidMount")])])]),t._v(" "),s("li",[s("p",[t._v("卸载时")]),t._v(" "),s("ul",[s("li",[t._v("调用 componentWillUnmount")])])]),t._v(" "),s("li",[s("p",[t._v("更新状态 1 （setState）")]),t._v(" "),s("ul",[s("li",[t._v("调用 getDerivedStateFromProps")]),t._v(" "),s("li",[t._v("调用 shouldComponentUpdate")]),t._v(" "),s("li",[t._v("调用 render")]),t._v(" "),s("li",[t._v("调用 getSnapshotBeforeUpdate")]),t._v(" "),s("li",[t._v("调用 componentDidUpdate")])])]),t._v(" "),s("li",[s("p",[t._v("更新状态 2 （forceUpdate:不经过阀门判断，直接进入更新流程，即使没有对状态做修改）")]),t._v(" "),s("ul",[s("li",[t._v("调用 getDerivedStateFromProps")]),t._v(" "),s("li",[t._v("调用 render")]),t._v(" "),s("li",[t._v("调用 getSnapshotBeforeUpdate")]),t._v(" "),s("li",[t._v("调用 componentDidUpdate")])])]),t._v(" "),s("li",[s("p",[t._v("更新状态 3 （父组件 render：父组件执行了 render）")]),t._v(" "),s("ul",[s("li",[t._v("调用 getDerivedStateFromProps")]),t._v(" "),s("li",[t._v("调用 shouldComponentUpdate")]),t._v(" "),s("li",[t._v("调用 render")]),t._v(" "),s("li",[t._v("调用 getSnapshotBeforeUpdate")]),t._v(" "),s("li",[t._v("调用 componentDidUpdate")])])])]),t._v(" "),s("h4",{attrs:{id:"getderivedstatefromprops"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getderivedstatefromprops"}},[t._v("#")]),t._v(" getDerivedStateFromProps")]),t._v(" "),s("p",[t._v("从 props 得到一个派生的状态。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDerivedStateFromProps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("注意：")]),t._v(" "),s("ol",[s("li",[t._v("必须是一个静态方法，所以必须写 static")]),t._v(" "),s("li",[t._v("返回值必须是一个状态对象或者 null")]),t._v(" "),s("li",[t._v("可以接收两个参数，参数是 (props, state)")])]),t._v(" "),s("p",[t._v("问题：返回 null 的时候会怎么执行？\n如果这个钩子函数返回 null，其实和不写这个钩子函数效果是一样的，所有的代码都会正常执行。")]),t._v(" "),s("p",[t._v("问题：返回状态对象会怎么执行？\n其实就是返回一个对象，返回的这个对象会被合并设置到 state 上面，所以说它是一个派生的 state，但是这个 state 有一个特点，就是在当前组件对 state 进行更新，这个 state 是不会变化的，界面渲染也不会发生变化。")]),t._v(" "),s("p",[t._v("问题：为什么名字是 from props？\n因为这个钩子函数可以接收一个参数 props，然后 return 这个 props，达到将 props 转为 state 的特点。")]),t._v(" "),s("p",[t._v("问题：什么时候使用？\n适用于一个罕见的用例。即 state 的值在任何时候都取决于 props，但是派生状态会导致代码冗余，并使代码难以维护。")]),t._v(" "),s("h4",{attrs:{id:"getsnapshotbeforeupdate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getsnapshotbeforeupdate"}},[t._v("#")]),t._v(" getSnapshotBeforeUpdate")]),t._v(" "),s("p",[t._v("在发生更改之前从 dom 中捕获一些信息，其实就是更新前的信息，这里面return的值会作为更新完成钩子函数的参数，这样可以做一些计算。")])])}),[],!1,null,null,null);a.default=e.exports}}]);